<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Simple Cafe Cashier</title>

<style>
:root{
  --bg:#0f141c;
  --card:#181f2b;
  --line:#2a3344;
  --text:#eef2ff;
  --muted:#9fb0c7;
  --accent:#4da3ff;
  --ok:#28d17c;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--text);
}
button{font:inherit;color:inherit}

.wrap{max-width:520px;margin:auto;padding:14px 14px 120px}
.hidden{display:none}
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px;
  margin-top:12px;
}

/* ---------- HOME ---------- */
.homeBtn{
  width:100%;
  height:64px;
  margin-top:12px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#101624;
  font-size:18px;
  font-weight:900;
}

/* ---------- LIST ---------- */
.listBtn{
  width:100%;
  height:52px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#101624;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 14px;
  font-weight:800;
  margin-top:8px;
}

/* ---------- TICKET ---------- */
.ticketHeader{
  display:flex;
  justify-content:space-between;
  font-weight:900;
}
.lines{
  max-height:220px;
  overflow:auto;
  margin-top:8px;
}
.line{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  border-bottom:1px dashed var(--line);
}

/* ---------- QUICK ---------- */
.quick{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  margin-top:12px;
}
.quick button{
  height:56px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#101624;
  font-weight:800;
  font-size:14px;
}

/* ---------- PRODUCTS ---------- */
.products{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px;
  margin-top:10px;
}
.products button{
  height:52px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#101624;
  font-weight:800;
}
.products span{
  display:block;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="wrap">

<!-- HOME -->
<div id="home">
  <h2>â˜• Simple Cashier</h2>
  <button class="homeBtn" onclick="newOrder()">â• ÎÎ­Î± Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±</button>
  <button class="homeBtn" onclick="openOrders()">ğŸ“„ Î‘Î½Î¿Î¹Ï‡Ï„Î­Ï‚ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚</button>
  <button class="homeBtn" onclick="summary()">ğŸ“Š Î£ÏÎ½Î¿ÏˆÎ·</button>
</div>

<!-- TABLE PICKER -->
<div id="tables" class="hidden">
  <h3>Î•Ï€Î¹Î»Î¿Î³Î® Ï„ÏÎ±Ï€ÎµÎ¶Î¹Î¿Ï</h3>
  <div class="card">
    <div id="tableList"></div>
  </div>
</div>

<!-- TICKET -->
<div id="ticket" class="hidden">
  <div class="ticketHeader">
    <div id="ticketTitle"></div>
    <div id="ticketTotal"></div>
  </div>

  <div class="lines" id="lines"></div>

  <div class="quick" id="quick"></div>

  <div class="products" id="products"></div>

  <button class="homeBtn" onclick="pay()">ğŸ’³ Î Î»Î·ÏÏ‰Î¼Î®</button>
  <button class="homeBtn" onclick="goHome()">â† Î‘ÏÏ‡Î¹ÎºÎ®</button>
</div>

</div>

<script>
/* ---------- DATA ---------- */
const TABLES=["T1","T2","T3","T4","T5","T6","T7","T8","BAR","Î•ÎÎ©"];
const PRODUCTS=[
  ["Espresso",2.6],["Cappuccino",3.6],["Freddo",3.8],["Latte",4.2],
  ["ÎœÏ€ÏÏÎ±",5.2],["Aperol",8.5],["ÎÎµÏÏŒ",2.8],["ÎšÏÎ¿Ï…Î±ÏƒÎ¬Î½",2.8]
];

let tickets=JSON.parse(localStorage.getItem("tickets")||"{}");
let usage=JSON.parse(localStorage.getItem("usage")||"{}");
let currentTable=null;

/* ---------- NAV ---------- */
function show(id){
  ["home","tables","ticket"].forEach(v=>document.getElementById(v).classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}
function goHome(){show("home")}

/* ---------- HOME ---------- */
function newOrder(){
  renderTables();
  show("tables");
}
function openOrders(){
  renderTables(true);
  show("tables");
}
function summary(){
  let sum=0;
  Object.values(tickets).flat().forEach(i=>sum+=i[1]);
  alert("Î£ÏÎ½Î¿Î»Î¿ Î·Î¼Î­ÏÎ±Ï‚: "+sum.toFixed(2)+"â‚¬");
}

/* ---------- TABLES ---------- */
function renderTables(openOnly=false){
  const box=document.getElementById("tableList");
  box.innerHTML="";
  TABLES.forEach(t=>{
    if(openOnly && !tickets[t]) return;
    const b=document.createElement("button");
    b.className="listBtn";
    b.innerHTML=`${t} <span>${tickets[t]?total(t).toFixed(2)+"â‚¬":""}</span>`;
    b.onclick=()=>openTicket(t);
    box.appendChild(b);
  });
}

/* ---------- TICKET ---------- */
function openTicket(t){
  currentTable=t;
  if(!tickets[t]) tickets[t]=[];
  show("ticket");
  document.getElementById("ticketTitle").innerText="Î¤ÏÎ±Ï€Î­Î¶Î¹ "+t;
  renderTicket();
  renderQuick();
  renderProducts();
}

function renderTicket(){
  const box=document.getElementById("lines");
  box.innerHTML="";
  tickets[currentTable].forEach(l=>{
    const d=document.createElement("div");
    d.className="line";
    d.innerHTML=`${l[0]} <b>${l[1]}â‚¬</b>`;
    box.appendChild(d);
  });
  document.getElementById("ticketTotal").innerText=total(currentTable).toFixed(2)+"â‚¬";
  localStorage.setItem("tickets",JSON.stringify(tickets));
}

function addItem(name,price){
  tickets[currentTable].push([name,price]);
  usage[name]=(usage[name]||0)+1;
  localStorage.setItem("usage",JSON.stringify(usage));
  navigator.vibrate?.(15);
  renderTicket();
  renderQuick();
}

/* ---------- QUICK ---------- */
function renderQuick(){
  const q=document.getElementById("quick");
  q.innerHTML="";
  Object.entries(usage).sort((a,b)=>b[1]-a[1]).slice(0,8).forEach(i=>{
    const b=document.createElement("button");
    b.innerText=i[0];
    b.onclick=()=>addItem(i[0],findPrice(i[0]));
    q.appendChild(b);
  });
}

/* ---------- PRODUCTS ---------- */
function renderProducts(){
  const p=document.getElementById("products");
  p.innerHTML="";
  PRODUCTS.forEach(i=>{
    const b=document.createElement("button");
    b.innerHTML=`${i[0]}<span>${i[1]}â‚¬</span>`;
    b.onclick=()=>addItem(i[0],i[1]);
    p.appendChild(b);
  });
}

/* ---------- PAY ---------- */
function pay(){
  if(!confirm("ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ· Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚;")) return;
  delete tickets[currentTable];
  localStorage.setItem("tickets",JSON.stringify(tickets));
  goHome();
}

/* ---------- UTILS ---------- */
function total(t){return tickets[t].reduce((s,i)=>s+i[1],0)}
function findPrice(n){return PRODUCTS.find(p=>p[0]==n)?.[1]||0}
</script>
</body>
</html>
